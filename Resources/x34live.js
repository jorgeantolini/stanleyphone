$(document).ready(function(){function n(b){var a=WiziCore_AppContext.getInstance().inputParameters(),d=function(b){var c=b[0],b=b[1];a[c]!=void 0?(a[c]instanceof Array||(a[c]=[a[c]]),a[c].push(b)):a[c]=b},c=b[0],e=b[1];if(e==void 0)d([c]);else if(c!=""&&e!="")try{if(c=="inputParams"&&(e=unescape(e),e=JSON.parse(e),typeof e=="string"&&o(e,n)),typeof e=="object")for(var g in e)d([g,e[g]]);else d(b)}catch(f){acDebugger.systemLog("setInputParameters error",f),d([c,e])}}function o(b,a){for(var d=b.split("&"),
c=0,e=d.length;c<e;c++){var g=d[c].split("=");if(a(g)===!0)break}}function t(){var b=null;return b=AC.Core.cookie().cookie("swirlSession")}function p(b){var a=WiziCore_Helper.getPrintData();if(a&&typeof a.instance=="object"&&typeof a.instance!="string")b.instance=a.instance;WiziCore_AppContext.getInstance().forms()._populateFormResult(b,u)}function q(b){function a(a,d,f){if(a.sessionId!=void 0)try{l!=null&&l.stop();var i=g;f==i&&(i=d!=void 0&&d!=""?d:i);b.loadFullForm(a.sessionId,i,c,function(a){a.error==
!1?p(a.object.result):(WiziCore_Helper.enableInterface(),a=AC.Core.lang().tr("live_load_error"),j(AC.Core.lang().tr("live_create_sess"),a,18))},e)}catch(h){acDebugger.systemLog1("onSessionFullLogin :: error",h)}else WiziCore_Helper.enableInterface(),a=AC.Core.lang().tr("live_create_sess_error"),j(AC.Core.lang().tr("live_create_sess"),a,19)}if(window.formObject)m({error:!1,object:{result:window.formObject}});else{var d=t(),c=h("instanceId"),e=h("roleId"),g=window.WiziFormId?window.WiziFormId:h("formId");
WiziCore_AppContext.getInstance();var f=WiziCore_Helper.getPrintData();if(f&&typeof f.instanceId=="string")c=f.instanceId;$(b).bind(WiziCore_Api_SessionRequester.onLiveLogin,function(b,c,d,e){a(c,d,e)});d==void 0||d==null?r(g,c,e):b.loginAndLoadFormWithSession(d,g,c,function(a){a.error?r(g,c,e):m(a)},e)}}function r(b,a,d){f.loginAndLoadForm(null,null,b,a,function(a){m(a)},d)}function m(b){var a=b.object.result;b.error?(k.empty(),a=AC.Core.lang().tr("live_create_sess_error"),a+=b.object.message!=void 0?
"<br>"+b.object.message:"",j(AC.Core.lang().tr("live_create_sess"),a,20)):(f.populateLoginResult(a.loginResult),p(a.formResult))}function h(b){for(var a=window.location.search.substring(1).split("&"),d=null,c=0,e=a.length;c<e;c++){var f=a[c].split("=");f[0]==b&&f.length>1&&(d=f[1])}return d}function u(b,a,d,c){b?(k.empty(),j(AC.Core.lang().tr("live_load_inst"),a,17)):(window.swirlDebugger!=void 0&&typeof window.swirlDebugger.openMode=="function"&&swirlDebugger.openMode(WiziCore_Api_Debugger.MODE_USER_OPEN),
k.empty(),b={session:f,pageId:h("pageId")},a=new WiziCore_UI_FormRuntime(WiziCore_UI_FormRuntime.LIVE_MODE),a.show(d,c,k,b),WiziCore_Helper.enableInterface(),l=a)}function j(b,a,d){b=WiziCore_Helper.showError(b,a,d);$(b).one(WiziCore_UI_MessageBoxWidget.onDialogClose,function(a,b){switch(b){case WiziCore_UI_MessageBoxWidget.IDOK:setTimeout(function(){},200)}});WiziCore_Helper.callPrint()}WiziCore_OnErrorEvent.initOnError();o(window.location.search.substring(1),n);AC.Core.lang(AC.Lng.ENGLISH).lang(SwirlLangObjectEn);
var s=WiziCore_AppContext.getInstance(),f=s.getSession();s.widgetScripts().initList();var k=$("#wiziLiveMode");window.PhoneGap?document.addEventListener("deviceready",function(){q(f)},!1):q(f);var l=null});
